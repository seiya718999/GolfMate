<div class="container">
  <div class="row">
    <div class="col-md-3 d-flex ml-auto mb-2 mt-1">
      <%= render 'search/post_form' %>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-10 pt-5 border-b">
      <%= link_to customer_path(@post.customer) do %>
        <%= image_tag @post.customer.get_profile_image(70, 70), class: "rounded-circle" %>
      <% end %>
      <%= @post.customer.last_name %>　<%= @post.customer.first_name %>
      <%= @post.created_at.strftime("%Y年%m月%d日") %><br>

      <%= @post.body %>
      <% if @post.get_post_image(100, 100) %>
        <%= image_tag post.get_post_image(100, 100) %>
      <% end %>

      <span>
        <% if current_customer %> <!-- ユーザーがログインしている場合のみリンクの表示 -->
          <% if @post.favorited_by?(current_customer) %>
            <%= link_to post_favorites_path(@post), method: :delete do %>
              ♥<%= @post.favorites.count %>
            <% end %>
          <% else %>
            <%= link_to post_favorites_path(@post), method: :post do %>
              ♡<%= @post.favorites.count %>
            <% end %>
          <% end %>
          <%= link_to new_post_comment_path(@post) do %>
            コメント<%= @post.comments.count %>
          <% end %>
        <% else %>
        　♡<%= @post.favorites.count %>
        　コメント<%= @post.comments.count %>
        <% end %>
      </span>
      <% if current_customer && @post.customer_id == current_customer.id %>
        <%= link_to "編集", edit_post_path(@post.id) %>
        <%= link_to "投稿を削除", post_path(@post.id), method: :delete, data: { confirm: '本当に削除しますか？' } %>
      <% end %>
    </div>
  </div>
  <div class="row">
    <div class="col-md-5 mb-2 mt-1">
      <%= render "public/comments/index", comments: @comments %>
    </div>
  </div>
</div>